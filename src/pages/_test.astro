---
import Base from "../layouts/Base.astro";

// côté conteneur, l’API interne est joignable sur le nom de service docker
const API_BASE = process.env.API_INTERNAL_BASE || import.meta.env.PUBLIC_API_BASE || "http://optimeal-api:8000";
const r = await fetch(`${API_BASE}/healthz`);
const data = await r.json();
---
<Base title="Test API">
  <h1>Test API ↔ FastAPI</h1>
  <p>API status: <strong>{data.status}</strong></p>
  <p><a href="/">← accueil</a></p>
</Base>