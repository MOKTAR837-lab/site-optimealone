---
import BaseLayout from "../layouts/BaseLayout.astro";
---
<BaseLayout title="Connexion">
  <section class="min-h-screen flex items-center justify-center bg-slate-50 py-12 px-4">
    <div class="card max-w-md w-full p-8">
      <h1 class="text-2xl font-bold mb-1">Connexion</h1>
      <form id="login-form" class="grid gap-3 mt-4">
        <label class="text-sm font-medium">Email<input type="email" name="email" required class="mt-1 w-full rounded-xl border-slate-300 focus:border-emerald-500 focus:ring-emerald-500" /></label>
        <label class="text-sm font-medium">Mot de passe<input type="password" name="password" required class="mt-1 w-full rounded-xl border-slate-300 focus:border-emerald-500 focus:ring-emerald-500" /></label>
        <button id="btn" type="button" class="btn-primary mt-2">Se connecter</button>
      </form>
    </div>
  </section>
</BaseLayout>
<script>
const form=document.getElementById("login-form");
document.getElementById("btn")?.addEventListener("click", async ()=>{
  const fd=new FormData(form); const data=Object.fromEntries(fd.entries());
  const base = import.meta.env.PUBLIC_BACKEND_URL + import.meta.env.PUBLIC_API_BASE;
  // POST /auth/login (FastAPI)
  alert(`POST ${base}/auth/login\nBody: ${JSON.stringify({...data, password:"••••"}, null, 2)}`);
});
</script>