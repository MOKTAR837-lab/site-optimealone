---
import BaseLayout from "../layouts/BaseLayout.astro";
---
<BaseLayout title="Inscription">
  <section class="min-h-screen flex items-center justify-center bg-slate-50 py-12 px-4">
    <div class="card max-w-md w-full p-8">
      <h1 class="text-2xl font-bold mb-1">CrÃ©er un compte</h1>
      <p class="text-sm text-slate-600 mb-6">Nom & email suffisent. DÃ©sinscription Ã  tout moment.</p>
      <form id="signup-form" class="grid gap-3">
        <label class="text-sm font-medium">Nom<input name="name" required class="mt-1 w-full rounded-xl border-slate-300 focus:border-emerald-500 focus:ring-emerald-500" /></label>
        <label class="text-sm font-medium">Email<input type="email" name="email" required class="mt-1 w-full rounded-xl border-slate-300 focus:border-emerald-500 focus:ring-emerald-500" /></label>
        <label class="text-sm font-medium">Mot de passe<input type="password" name="password" required class="mt-1 w-full rounded-xl border-slate-300 focus:border-emerald-500 focus:ring-emerald-500" /></label>
        <label class="inline-flex items-start gap-2 text-sm"><input type="checkbox" name="newsletter" class="mt-1 rounded border-slate-300" /><span>Je souhaite recevoir la newsletter (facultatif).</span></label>
        <button id="btn" type="button" class="btn-primary mt-2">CrÃ©er mon compte</button>
        <p class="text-xs text-slate-500">En crÃ©ant un compte, vous acceptez nos <a href="/terms" class="underline">CGU</a> et notre <a href="/privacy" class="underline">Politique de confidentialitÃ©</a>.</p>
      </form>
    </div>
  </section>
</BaseLayout>
<script>
const form=document.getElementById("signup-form");
document.getElementById("btn")?.addEventListener("click", async ()=>{
  const fd=new FormData(form); const data=Object.fromEntries(fd.entries());
  const base = import.meta.env.PUBLIC_BACKEND_URL + import.meta.env.PUBLIC_API_BASE;
  // POST /auth/signup (FastAPI)
  alert(`POST ${base}/auth/signup\nBody: ${JSON.stringify({...data, password:"â€¢â€¢â€¢â€¢"}, null, 2)}`);
});
</script>